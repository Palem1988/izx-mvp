var IzxCharityNetwork = function(connection) {

    this.connection = connection;

    this.abi = [{"constant":false,"inputs":[{"name":"donation_index","type":"uint256"}],"name":"transfer_donation","outputs":[],"payable":false,"type":"function"},{"constant":false,"inputs":[{"name":"donation_index","type":"uint256"}],"name":"return_donation","outputs":[],"payable":false,"type":"function"},{"constant":true,"inputs":[],"name":"owner","outputs":[{"name":"","type":"address"}],"payable":false,"type":"function"},{"constant":true,"inputs":[],"name":"donations_num","outputs":[{"name":"","type":"uint256"}],"payable":false,"type":"function"},{"constant":false,"inputs":[{"name":"from_donator","type":"uint256"},{"name":"to_charity_member","type":"uint256"},{"name":"amount","type":"uint256"}],"name":"donate","outputs":[{"name":"index","type":"uint256"}],"payable":false,"type":"function"},{"constant":false,"inputs":[{"name":"newOwner","type":"address"}],"name":"transferOwnership","outputs":[],"payable":false,"type":"function"},{"constant":true,"inputs":[{"name":"donation_index","type":"uint256"}],"name":"donation","outputs":[{"name":"from_donator","type":"uint256"},{"name":"to_charity_member","type":"uint256"},{"name":"amount","type":"uint256"},{"name":"transfered","type":"bool"},{"name":"returned","type":"bool"}],"payable":false,"type":"function"}];

    this.deploy = function(callback){
        this.connection.web3.eth.contract(this.abi).new( {
                from: this.connection.address,
                data: '0x606060405260006001555b336000806101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff1602179055505b5b6106228061005b6000396000f30060606040523615610081576000357c0100000000000000000000000000000000000000000000000000000000900463ffffffff1680632b78ac8814610086578063325ce0ea146100a95780638da5cb5b146100cc5780639dfb518b14610121578063ef88f48b1461014a578063f2fde38b14610193578063fdac3254146101cc575b600080fd5b341561009157600080fd5b6100a76004808035906020019091905050610227565b005b34156100b457600080fd5b6100ca60048080359060200190919050506102d9565b005b34156100d757600080fd5b6100df61038b565b604051808273ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200191505060405180910390f35b341561012c57600080fd5b6101346103b0565b6040518082815260200191505060405180910390f35b341561015557600080fd5b61017d60048080359060200190919080359060200190919080359060200190919050506103b6565b6040518082815260200191505060405180910390f35b341561019e57600080fd5b6101ca600480803573ffffffffffffffffffffffffffffffffffffffff169060200190919050506104d3565b005b34156101d757600080fd5b6101ed6004808035906020019091905050610573565b6040518086815260200185815260200184815260200183151515158152602001821515151581526020019550505050505060405180910390f35b60008060009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff163373ffffffffffffffffffffffffffffffffffffffff1614151561028457600080fd5b60015482108015610296575060008210155b15156102a157600080fd5b60026000838152602001908152602001600020905060018160030160006101000a81548160ff0219169083151502179055505b5b5050565b60008060009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff163373ffffffffffffffffffffffffffffffffffffffff1614151561033657600080fd5b60015482108015610348575060008210155b151561035357600080fd5b60026000838152602001908152602001600020905060018160030160016101000a81548160ff0219169083151502179055505b5b5050565b6000809054906101000a900473ffffffffffffffffffffffffffffffffffffffff1681565b60015481565b60008060009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff163373ffffffffffffffffffffffffffffffffffffffff1614151561041357600080fd5b600154905060a060405190810160405280858152602001848152602001838152602001600015158152602001600015158152506002600083815260200190815260200160002060008201518160000155602082015181600101556040820151816002015560608201518160030160006101000a81548160ff02191690831515021790555060808201518160030160016101000a81548160ff021916908315150217905550905050600180600082825401925050819055505b5b9392505050565b6000809054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff163373ffffffffffffffffffffffffffffffffffffffff1614151561052e57600080fd5b806000806101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff1602179055505b5b50565b6000806000806000806001548710801561058e575060008710155b151561059957600080fd5b6002600088815260200190815260200160002090508060000154955080600101549450806002015493508060030160009054906101000a900460ff1692508060030160019054906101000a900460ff1691505b50919395909294505600a165627a7a723058208c37fad49e0862a823c37165757c188373bf3a81ec95886172ef8df16fb4e0f70029',
                gas: '4700000'
            }, callback)
    }

    this.transaction_hash = '0x682464529cf9e7dbe1f79424f028846e9091efb4bc879ad741ab411b0899b142';
    this.address = '0xf79d8709567f93e380ec0854c7c1aec5b7b701db';

    this.contract = this.connection.web3.eth.contract(this.abi).at(this.address);


}

module.exports = IzxCharityNetwork;